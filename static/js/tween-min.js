function Delegate(){}Delegate.create=function(a,c){for(var b=[],d=arguments.length,e=2;e<d;e++)b[e-2]=arguments[e];return function(){var f=[].concat(arguments,b);c.apply(a,f)}};Tween=function(a,c,b,d,e,f,g){this.init(a,c,b,d,e,f,g)};var t=Tween.prototype;t.obj={};t.prop="";t.func=function(a,c,b,d){return b*a/d+c};t.begin=0;t.change=0;t.prevTime=0;t.prevPos=0;t.looping=false;t._duration=0;t._time=0;t._pos=0;t._position=0;t._startTime=0;t._finish=0;t.name="";t.suffixe="";t._listeners=[];t.setTime=function(a){this.prevTime=this._time;if(a>this.getDuration())if(this.looping){this.rewind(a-this._duration);this.update();this.broadcastMessage("onMotionLooped",{target:this,type:"onMotionLooped"})}else{this._time=this._duration;this.update();this.stop();this.broadcastMessage("onMotionFinished",{target:this,type:"onMotionFinished"})}else{if(a<0)this.rewind();else this._time=a;this.update()}};t.getTime=function(){return this._time};t.setDuration=function(a){this._duration=a==null||a<=0?1E5:a};t.getDuration=function(){return this._duration};t.setPosition=function(a){this.prevPos=this._pos;var c=this.suffixe!=""?this.suffixe:"";this.obj[this.prop]=Math.round(a)+c;this._pos=a;this.broadcastMessage("onMotionChanged",{target:this,type:"onMotionChanged"})};t.getPosition=function(a){if(a==undefined)a=this._time;return this.func(a,this.begin,this.change,this._duration)};t.setFinish=function(a){this.change=a-this.begin};t.getFinish=function(){return this.begin+this.change};t.init=function(a,c,b,d,e,f,g){if(arguments.length){this._listeners=[];this.addListener(this);if(g)this.suffixe=g;this.obj=a;this.prop=c;this._pos=this.begin=d;this.setDuration(f);if(b!=null&&b!="")this.func=b;this.setFinish(e)}};t.start=function(){this.rewind();this.startEnterFrame();this.broadcastMessage("onMotionStarted",{target:this,type:"onMotionStarted"})};t.rewind=function(a){this.stop();this._time=a==undefined?0:a;this.fixTime();this.update()};t.fforward=function(){this._time=this._duration;this.fixTime();this.update()};t.update=function(){this.setPosition(this.getPosition(this._time))};t.startEnterFrame=function(){this.stopEnterFrame();this.isPlaying=true;this.onEnterFrame()};t.onEnterFrame=function(){if(this.isPlaying){this.nextFrame();setTimeout(Delegate.create(this,this.onEnterFrame),0)}};t.nextFrame=function(){this.setTime((this.getTimer()-this._startTime)/1E3)};t.stop=function(){this.stopEnterFrame();this.broadcastMessage("onMotionStopped",{target:this,type:"onMotionStopped"})};t.stopEnterFrame=function(){this.isPlaying=false};t.continueTo=function(a,c){this.begin=this._pos;this.setFinish(a);this._duration!=undefined&&this.setDuration(c);this.start()};t.resume=function(){this.fixTime();this.startEnterFrame();this.broadcastMessage("onMotionResumed",{target:this,type:"onMotionResumed"})};t.yoyo=function(){this.continueTo(this.begin,this._time)};t.addListener=function(a){this.removeListener(a);return this._listeners.push(a)};t.removeListener=function(a){for(var c=this._listeners,b=c.length;b--;)if(c[b]==a){c.splice(b,1);return true}return false};t.broadcastMessage=function(){for(var a=[],c=0;c<arguments.length;c++)a.push(arguments[c]);var b=a.shift(),d=this._listeners,e=d.length;for(c=0;c<e;c++)d[c][b]&&d[c][b].apply(d[c],a)};t.fixTime=function(){this._startTime=this.getTimer()-this._time*1E3};t.getTimer=function(){return(new Date).getTime()-this._time};Tween.backEaseIn=function(a,c,b,d){if(e==undefined)var e=1.70158;return b*(a/=d)*a*((e+1)*a-e)+c};Tween.backEaseOut=function(a,c,b,d){if(e==undefined)var e=1.70158;return b*((a=a/d-1)*a*((e+1)*a+e)+1)+c};Tween.backEaseInOut=function(a,c,b,d){if(e==undefined)var e=1.70158;if((a/=d/2)<1)return b/2*a*a*(((e*=1.525)+1)*a-e)+c;return b/2*((a-=2)*a*(((e*=1.525)+1)*a+e)+2)+c};Tween.elasticEaseIn=function(a,c,b,d,e,f){if(a==0)return c;if((a/=d)==1)return c+b;f||(f=d*0.3);if(!e||e<Math.abs(b)){e=b;b=f/4}else b=f/(2*Math.PI)*Math.asin(b/e);return-(e*Math.pow(2,10*(a-=1))*Math.sin((a*d-b)*2*Math.PI/f))+c};Tween.elasticEaseOut=function(a,c,b,d,e,f){if(a==0)return c;if((a/=d)==1)return c+b;f||(f=d*0.3);if(!e||e<Math.abs(b)){e=b;var g=f/4}else g=f/(2*Math.PI)*Math.asin(b/e);return e*Math.pow(2,-10*a)*Math.sin((a*d-g)*2*Math.PI/f)+b+c};Tween.elasticEaseInOut=function(a,c,b,d,e,f){if(a==0)return c;if((a/=d/2)==2)return c+b;f||(f=d*0.3*1.5);if(!e||e<Math.abs(b)){e=b;var g=f/4}else g=f/(2*Math.PI)*Math.asin(b/e);if(a<1)return-0.5*e*Math.pow(2,10*(a-=1))*Math.sin((a*d-g)*2*Math.PI/f)+c;return e*Math.pow(2,-10*(a-=1))*Math.sin((a*d-g)*2*Math.PI/f)*0.5+b+c};Tween.bounceEaseOut=function(a,c,b,d){return(a/=d)<1/2.75?b*7.5625*a*a+c:a<2/2.75?b*(7.5625*(a-=1.5/2.75)*a+0.75)+c:a<2.5/2.75?b*(7.5625*(a-=2.25/2.75)*a+0.9375)+c:b*(7.5625*(a-=2.625/2.75)*a+0.984375)+c};Tween.bounceEaseIn=function(a,c,b,d){return b-Tween.bounceEaseOut(d-a,0,b,d)+c};Tween.bounceEaseInOut=function(a,c,b,d){return a<d/2?Tween.bounceEaseIn(a*2,0,b,d)*0.5+c:Tween.bounceEaseOut(a*2-d,0,b,d)*0.5+b*0.5+c};Tween.strongEaseInOut=function(a,c,b,d){return b*(a/=d)*a*a*a*a+c};Tween.regularEaseIn=function(a,c,b,d){return b*(a/=d)*a+c};Tween.regularEaseOut=function(a,c,b,d){return-b*(a/=d)*(a-2)+c};Tween.regularEaseInOut=function(a,c,b,d){if((a/=d/2)<1)return b/2*a*a+c;return-b/2*(--a*(a-2)-1)+c};Tween.strongEaseIn=function(a,c,b,d){return b*(a/=d)*a*a*a*a+c};Tween.strongEaseOut=function(a,c,b,d){return b*((a=a/d-1)*a*a*a*a+1)+c};Tween.strongEaseInOut=function(a,c,b,d){if((a/=d/2)<1)return b/2*a*a*a*a*a+c;return b/2*((a-=2)*a*a*a*a+2)+c};
